import pypokedex
import PIL.Image, PIL.ImageTk
import tkinter as tk
from tkinter import *
import urllib3 
from io import BytesIO

window = tk.Tk()
window.geometry("1000x1000")
window.resizable(width=False, height=False)

# Add image file 
bg = PhotoImage( file = "Pokemon Background.png") 
  
#Create Canvas
my_canvas = Canvas(window, width=1000, height=1000, bd=0,highlightthickness=0)
my_canvas.pack(fill="both", expand=True)

#Set background
my_canvas.create_image(0,0, image = bg, anchor="nw")

window.title("National Pokedex")
window.config(padx=10, pady=10)

#Add title and subtitle
my_canvas.create_text(500, 50, text="National Pokedex", font=("Rockwell", 50), fill= "white")
my_canvas.create_text(500, 100, text="Created by Joseph Casino", font=("Rockwell", 15), fill= "red")

#Pokemon Information
pokemon_info = my_canvas.create_text(500, 150, text=f" ", font=("Rockwell", 50), fill= "black")
pokemon_image = my_canvas.create_image(500,400)
pokemon_types = my_canvas.create_text(500, 575, text=f" ", font=("Rockwell", 25), fill= "black")
pokemon_weight_height = my_canvas.create_text(500, 625, text=f" ", font=("Rockwell", 20), fill= "black")
pokemon_basestats = my_canvas.create_text(500, 675, text=f" ", font=("Rockwell", 15), fill= "black")


#getter function that retrieves Pokemon information
def load_pokemon():
    pokemon = pypokedex.get(name=Pokemon_Entry.get())

    http = urllib3.PoolManager()
    response = http.request('GET', pokemon.sprites.front.get('default'))
    image = PIL.Image.open(BytesIO(response.data))
    resize_image = image.resize((300, 300))

    img = PIL.ImageTk.PhotoImage(resize_image)
    my_canvas.itemconfig(pokemon_image, image=img)
    
    my_canvas.itemconfig(pokemon_info, text=f"{pokemon.dex} - {pokemon.name}".title())
    my_canvas.itemconfig(pokemon_types, text=" - ".join([t for t in pokemon.types]).title())
    my_canvas.itemconfig(pokemon_weight_height, text=f"Weight: {pokemon.weight}00 g - Height: {pokemon.height}0 cm")
    my_canvas.itemconfig(pokemon_basestats, text=f"HP: {pokemon.base_stats.hp} - Attack: {pokemon.base_stats.attack} - Defense: {pokemon.base_stats.defense} - Special Attack: {pokemon.base_stats.sp_atk} - Special Defense: {pokemon.base_stats.sp_def} - Speed: {pokemon.base_stats.speed}")


#Adds Message
my_canvas.create_text(500, 750, text="Enter Name or Pokedex #", font=("Rockwell", 20), fill= "black")

#Add Entry box
Pokemon_Entry = Entry(window, font=("Rockwell", 24), width=15, fg="black", bd=2)
Pokemon_window=my_canvas.create_window(500,800, window=Pokemon_Entry)

#Add Button
Load_Button = Button(window, text= "LOAD POKEMON", font=("Rockwell", 20), width = 15, command =load_pokemon)
load_btn_window = my_canvas.create_window(500,900, window=Load_Button)


window.mainloop()
